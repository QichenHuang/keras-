# Layer
在介绍[Model](../models/model.md)时我们提到过，网络层对象（`Layer`）是keras中执行实际运算的模块。使用keras构建模型时，
`Layer`对象是操作的最小单元。`Layer`是所有网络层的抽象基类，这一部分我们对`Layer`的各种子类进行介绍。

在介绍具体的子类之前，我们首先介绍如何定制化网络层类。这样一是能够更好的理解`Layer`基类的的内部逻辑，
二是对某些的`Layer`子类不了解时，有一个深入了解的方向。
## 定制化网络层
要实现定制化网络层，除了继承`Layer`基类之外，还要实现以下三个方法：
- `build(input_shape)`：由内部调用，用以定义该网络层权重的方法。该方法需要将`self.built`设置为`True`，
或者调用super().build(input_shape)
- `call(x)`：在[Model](../models/model.md)提到过，所有网络层对象都定义了`__call__`方法，都是可调用的。
在`keras.engine.base_layer.Layer.__call__`方法的源代码中可以看到，`__call__`方法实现了对象被调用的操作，在其中又调用了
`call`方法。`call`方法表示该网络层对象的计算逻辑。`Layer`基类的`call`方法没有实现任何逻辑，
而是由继承的子类来实现`call`方法中实际计算的逻辑。当单输入单输出时，该网络层接收输入张量，返回输出张量；当多输入多输出时，
接受张量列表或元组，返回张量列表或元组。
- `compute_output_shape(input_shape)`：该方法接受输入张量的尺寸，计算输出张量的尺寸，尺寸都以元组的形式传递。
用于网络层之间的尺寸推导。

重新定义上述三个函数之后，就完成了网络层的定制化。当对于某些网络层的内部逻辑存疑时，可以从上述三个函数的定义进行深入了解。

[上一页](../models/model.md)  
[下一页](./layer.md)  
[返回主页](../README.md)  